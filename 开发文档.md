# å¿«æ·é”®ç®¡ç†æ’ä»¶ - å¼€å‘æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**æ’ä»¶åç§°**ï¼šå‰ªè´´æ¿å†å²ç®¡ç†å™¨  
**æ’ä»¶ ID**ï¼š`clipboard-history-manager`  
**ç‰ˆæœ¬**ï¼š1.0.0  
**åˆ†ç±»**ï¼š`efficient_office`ï¼ˆé«˜æ•ˆåŠå…¬ï¼‰  
**æè¿°**ï¼šå®æ—¶ç›‘å¬å‰ªè´´æ¿å˜åŒ–ï¼Œä¿å­˜å‰ªè´´æ¿å†å²è®°å½•ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€æ–‡ä»¶ç­‰ï¼‰ï¼Œæ”¯æŒåˆ†ç±»ã€æœç´¢ã€è™šæ‹Ÿæ»šåŠ¨å±•ç¤º

---

## ğŸ¯ éœ€æ±‚åˆ†æ

### æ ¸å¿ƒåŠŸèƒ½

0. **é…ç½®æ–‡ä»¶ç³»ç»Ÿ**ï¼ˆconfig.tsï¼‰

   - é›†ä¸­ç®¡ç†æ‰€æœ‰å¯é…ç½®é¡¹
   - ç›‘å¬é—´éš”ã€ç¼©ç•¥å›¾å°ºå¯¸ã€æ€§èƒ½å‚æ•°ç­‰
   - æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹é…ç½®
   - ç±»å‹å®‰å…¨çš„é…ç½®è®¿é—®

1. **å®æ—¶ç›‘å¬å‰ªè´´æ¿å˜åŒ–**ï¼ˆPreload å±‚ï¼‰

   - ç›‘å¬æ–‡æœ¬å˜åŒ–
   - ç›‘å¬å›¾ç‰‡å˜åŒ–
   - ç›‘å¬æ–‡ä»¶å˜åŒ–
   - è‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“
   - **æ™ºèƒ½å»é‡**ï¼šé¿å…ä¿å­˜é‡å¤å†…å®¹

2. **æ•°æ®å­˜å‚¨**

   - ä½¿ç”¨ `naimo.db` API å­˜å‚¨å…ƒæ•°æ®
   - å›¾ç‰‡ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼š`app.getPath("userData")/images/`
   - æ–‡ä»¶åæ ¼å¼ï¼š`clipboard_å›¾ç‰‡_YYYYMMDD_HHmmss.png`
   - **ç¼©ç•¥å›¾ç”Ÿæˆ**ï¼š
     - æ ¹æ®åŸå§‹å›¾ç‰‡å®½é«˜æ¯”è‡ªåŠ¨ç”Ÿæˆç¼©ç•¥å›¾
     - ç¼©ç•¥å›¾æœ€å¤§å®½åº¦ï¼š200pxï¼ˆå¯åœ¨ config.ts ä¸­é…ç½®ï¼‰
     - ä¿æŒåŸå§‹å®½é«˜æ¯”ï¼Œä¸ä¼šå˜å½¢
     - ç¤ºä¾‹ï¼š1920x1080 çš„å›¾ç‰‡ â†’ 200x112 çš„ç¼©ç•¥å›¾
   - æ•°æ®åº“å­—æ®µï¼š
     - `_id`: å”¯ä¸€æ ‡è¯†
     - `type`: ç±»å‹ï¼ˆtext/image/fileï¼‰
     - `content`: å†…å®¹ï¼ˆæ–‡æœ¬å†…å®¹æˆ–æ–‡ä»¶è·¯å¾„ï¼‰
     - `preview`: é¢„è§ˆå†…å®¹ï¼ˆå›¾ç‰‡ base64 ç¼©ç•¥å›¾ï¼‰
     - `thumbnail`: ç¼©ç•¥å›¾è·¯å¾„ï¼ˆç”¨äºåˆ—è¡¨å±•ç¤ºï¼‰
     - `timestamp`: æ—¶é—´æˆ³
     - `hash`: å†…å®¹ hash å€¼ï¼ˆç”¨äºå»é‡ï¼‰
     - `category`: åˆ†ç±»ï¼ˆå¯é€‰ï¼‰
     - `tags`: æ ‡ç­¾ï¼ˆå¯é€‰ï¼‰

3. **å¯æ‰©å±•çš„å¤„ç†å™¨ç³»ç»Ÿ**

   - å›¾ç‰‡å¤„ç†å™¨ï¼šä¿å­˜å›¾ç‰‡æ–‡ä»¶ï¼Œç”Ÿæˆç¼©ç•¥å›¾
   - æ–‡æœ¬å¤„ç†å™¨ï¼šä¿å­˜æ–‡æœ¬å†…å®¹ï¼Œè®¡ç®— hash
   - æ–‡ä»¶å¤„ç†å™¨ï¼šæ ¹æ®æ–‡ä»¶ç±»å‹è¿›è¡Œä¸åŒå¤„ç†
   - å¯æ‰©å±•ï¼šæ”¯æŒè‡ªå®šä¹‰å¤„ç†å™¨

4. **UI é¡µé¢**
   - **å•åˆ—å¸ƒå±€**ï¼šåˆ—è¡¨ä¸­ç›´æ¥æ˜¾ç¤ºå†…å®¹å’Œç¼©ç•¥å›¾
   - è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨ï¼ˆé«˜æ€§èƒ½ï¼‰
   - åˆ†ç±»ç­›é€‰ï¼ˆæ–‡æœ¬/å›¾ç‰‡/æ–‡ä»¶ï¼‰
   - æœç´¢åŠŸèƒ½
   - **å›¾ç‰‡é¢„è§ˆå¼¹çª—**ï¼šç‚¹å‡»ç¼©ç•¥å›¾æ˜¾ç¤ºå®Œæ•´å›¾ç‰‡
   - æ“ä½œæŒ‰é’®ï¼ˆå¤åˆ¶å®Œæ•´å†…å®¹ã€åˆ é™¤ã€å¯¼å‡ºç­‰ï¼‰

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     UI å±‚ (main.ts)                  â”‚
â”‚  - è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨                                      â”‚
â”‚  - åˆ†ç±»ç­›é€‰å™¨                                        â”‚
â”‚  - æœç´¢æ¡†                                            â”‚
â”‚  - é¢„è§ˆé¢æ¿                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†•ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Preload å±‚ (preload.ts)                 â”‚
â”‚  - å‰ªè´´æ¿ç›‘å¬å™¨ (ClipboardWatcher)                   â”‚
â”‚  - å¤„ç†å™¨ç³»ç»Ÿ (Handlers)                             â”‚
â”‚  - æ–‡ä»¶ç®¡ç†å™¨ (FileManager)                          â”‚
â”‚  - æ•°æ®åº“ç®¡ç†å™¨ (DatabaseManager)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†•ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ•°æ®å­˜å‚¨å±‚                          â”‚
â”‚  - Naimo DB (å…ƒæ•°æ®)                                 â”‚
â”‚  - æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ (å›¾ç‰‡æ–‡ä»¶)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ç›®å½•ç»“æ„

```
shortcut-key-management/
â”œâ”€â”€ dist/                       # æ„å»ºäº§ç‰©
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.ts                 # å‰ç«¯å…¥å£
â”‚   â”œâ”€â”€ preload.ts              # Preload è„šæœ¬
â”‚   â”œâ”€â”€ config.ts               # é…ç½®æ–‡ä»¶ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ style.css               # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ clipboard.d.ts      # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ handlers/               # å¤„ç†å™¨æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ base.ts             # åŸºç¡€å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ text.ts             # æ–‡æœ¬å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ image.ts            # å›¾ç‰‡å¤„ç†å™¨
â”‚   â”‚   â””â”€â”€ file.ts             # æ–‡ä»¶å¤„ç†å™¨
â”‚   â””â”€â”€ components/             # UI ç»„ä»¶
â”‚       â”œâ”€â”€ VirtualList.ts      # è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨
â”‚       â”œâ”€â”€ SearchBar.ts        # æœç´¢æ 
â”‚       â””â”€â”€ CategoryFilter.ts   # åˆ†ç±»ç­›é€‰å™¨
â”œâ”€â”€ manifest.json               # æ’ä»¶é…ç½®
â”œâ”€â”€ index.html                  # HTML æ¨¡æ¿
â”œâ”€â”€ package.json                # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json               # TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts              # Vite é…ç½®
â””â”€â”€ README.md                   # è¯´æ˜æ–‡æ¡£
```

---

## âš™ï¸ é…ç½®æ–‡ä»¶è®¾è®¡

### é…ç½®æ–‡ä»¶ï¼ˆconfig.tsï¼‰

**ä½ç½®**ï¼š`src/config.ts`

**åŠŸèƒ½**ï¼šé›†ä¸­ç®¡ç†æ‰€æœ‰å¯é…ç½®é¡¹ï¼Œæ–¹ä¾¿è°ƒæ•´æ’ä»¶è¡Œä¸º

**ä¸»è¦é…ç½®é¡¹**ï¼š

```typescript
export const ClipboardConfig = {
  // ç›‘å¬é…ç½®
  pollingInterval: 500, // å‰ªè´´æ¿è½®è¯¢é—´éš”ï¼ˆæ¯«ç§’ï¼‰
  autoStartMonitoring: true, // æ˜¯å¦è‡ªåŠ¨å¼€å§‹ç›‘å¬
  enableDeduplication: true, // æ˜¯å¦å¯ç”¨æ™ºèƒ½å»é‡

  // å­˜å‚¨é…ç½®
  databaseName: "clipboard_history", // æ•°æ®åº“åç§°
  maxRecords: 1000, // æœ€å¤§å­˜å‚¨è®°å½•æ•°
  dataExpirationDays: 30, // æ•°æ®è¿‡æœŸæ—¶é—´ï¼ˆå¤©ï¼‰

  // ç¼©ç•¥å›¾é…ç½®ï¼ˆé‡ç‚¹ï¼‰
  thumbnailMaxWidth: 200, // ç¼©ç•¥å›¾æœ€å¤§å®½åº¦ï¼ˆåƒç´ ï¼‰
  thumbnailMaxHeight: 200, // ç¼©ç•¥å›¾æœ€å¤§é«˜åº¦ï¼ˆåƒç´ ï¼‰
  thumbnailQuality: 0.8, // ç¼©ç•¥å›¾è´¨é‡ï¼ˆ0-1ï¼‰
  thumbnailFormat: "png", // ç¼©ç•¥å›¾æ ¼å¼
  thumbnailKeepAspectRatio: true, // æ˜¯å¦ä¿æŒå®½é«˜æ¯”

  // å›¾ç‰‡å¤„ç†é…ç½®
  maxImageSize: 4096, // åŸå§‹å›¾ç‰‡æœ€å¤§å°ºå¯¸

  // UI é…ç½®
  virtualScrollItemHeight: 80, // è™šæ‹Ÿæ»šåŠ¨é¡¹é«˜åº¦
  virtualScrollBufferSize: 5, // ç¼“å†²åŒºå¤§å°

  // æ€§èƒ½é…ç½®
  searchDebounceDelay: 300, // æœç´¢é˜²æŠ–å»¶è¿Ÿ
  enableLazyLoad: true, // æ˜¯å¦å¯ç”¨æ‡’åŠ è½½

  // éšç§é…ç½®
  enableEncryption: false, // æ˜¯å¦å¯ç”¨åŠ å¯†
  appBlacklist: [], // åº”ç”¨é»‘åå•
  sensitiveKeywords: [], // æ•æ„Ÿè¯è¿‡æ»¤
};
```

**ä½¿ç”¨æ–¹å¼**ï¼š

```typescript
import { ClipboardConfig, getConfig, setConfig } from "./config";

// ç›´æ¥è®¿é—®é…ç½®
const maxWidth = ClipboardConfig.thumbnailMaxWidth;

// ä½¿ç”¨ getter å‡½æ•°
const interval = getConfig("pollingInterval");

// åŠ¨æ€ä¿®æ”¹é…ç½®ï¼ˆè¿è¡Œæ—¶ï¼‰
setConfig("thumbnailMaxWidth", 300);
```

**é…ç½®ä¼˜å…ˆçº§**ï¼š

1. è¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹ï¼ˆ`setConfig`ï¼‰- æœ€é«˜ä¼˜å…ˆçº§
2. `config.ts` æ–‡ä»¶ä¸­çš„é»˜è®¤å€¼
3. æ’ä»¶å†…ç½®çš„ç¡¬ç¼–ç é»˜è®¤å€¼ - æœ€ä½ä¼˜å…ˆçº§

---

## ğŸ”§ æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 1. å‰ªè´´æ¿ç›‘å¬å™¨ï¼ˆClipboardWatcherï¼‰

**åŠŸèƒ½**ï¼šå®æ—¶ç›‘å¬å‰ªè´´æ¿å˜åŒ–

```typescript
class ClipboardWatcher {
  private lastText: string = "";
  private lastImage: string = "";
  private isMonitoring: boolean = false;

  // å¼€å§‹ç›‘å¬
  start(): void;

  // åœæ­¢ç›‘å¬
  stop(): void;

  // æ£€æŸ¥å‰ªè´´æ¿å˜åŒ–
  private async checkClipboard(): Promise<void>;

  // å¤„ç†æ–‡æœ¬å˜åŒ–
  private async handleTextChange(text: string): Promise<void>;

  // å¤„ç†å›¾ç‰‡å˜åŒ–
  private async handleImageChange(imageData: string): Promise<void>;
}
```

**ç›‘å¬ç­–ç•¥**ï¼š

- ä½¿ç”¨å®šæ—¶å™¨è½®è¯¢ï¼ˆ500ms é—´éš”ï¼‰
- å¯¹æ¯”ä¸Šæ¬¡å†…å®¹ï¼Œæ£€æµ‹å˜åŒ–
- **æ™ºèƒ½å»é‡æœºåˆ¶**ï¼š
  - æ–‡æœ¬ï¼šè®¡ç®— MD5 hash å¯¹æ¯”
  - å›¾ç‰‡ï¼šè®¡ç®— base64 æ•°æ®çš„ hash å¯¹æ¯”
  - é¿å…ä¿å­˜å®Œå…¨ç›¸åŒçš„å†…å®¹

### 2. å¤„ç†å™¨ç³»ç»Ÿï¼ˆHandlersï¼‰

**åŸºç¡€å¤„ç†å™¨æ¥å£**ï¼š

```typescript
interface ClipboardHandler {
  // å¤„ç†å™¨ç±»å‹
  type: "text" | "image" | "file";

  // æ£€æµ‹æ˜¯å¦å¯ä»¥å¤„ç†
  canHandle(data: any): boolean;

  // å¤„ç†æ•°æ®
  handle(data: any): Promise<ClipboardRecord>;

  // ç”Ÿæˆé¢„è§ˆ
  generatePreview(data: any): Promise<string>;
}
```

**å…·ä½“å¤„ç†å™¨**ï¼š

1. **TextHandler**ï¼ˆæ–‡æœ¬å¤„ç†å™¨ï¼‰

   - ä¿å­˜æ–‡æœ¬å†…å®¹
   - ç”Ÿæˆæ–‡æœ¬æ‘˜è¦ä½œä¸ºé¢„è§ˆ
   - æ£€æµ‹ç‰¹æ®Šæ ¼å¼ï¼ˆURLã€ä»£ç ç­‰ï¼‰

2. **ImageHandler**ï¼ˆå›¾ç‰‡å¤„ç†å™¨ï¼‰

   - ä¿å­˜åŸå§‹å›¾ç‰‡åˆ°æ–‡ä»¶ç³»ç»Ÿ
   - ç”Ÿæˆç¼©ç•¥å›¾ï¼ˆæŒ‰åŸå§‹å®½é«˜æ¯”ç¼©æ”¾ï¼Œæœ€å¤§å®½åº¦å¯é…ç½®ï¼‰
   - æå–å›¾ç‰‡å…ƒä¿¡æ¯ï¼ˆå°ºå¯¸ã€æ ¼å¼ï¼‰
   - è‡ªåŠ¨è®¡ç®—ç¼©ç•¥å›¾å°ºå¯¸ï¼Œç¡®ä¿ä¸å˜å½¢

3. **FileHandler**ï¼ˆæ–‡ä»¶å¤„ç†å™¨ï¼‰
   - ä¿å­˜æ–‡ä»¶è·¯å¾„
   - æ ¹æ®æ–‡ä»¶ç±»å‹ç”Ÿæˆå›¾æ ‡
   - æå–æ–‡ä»¶ä¿¡æ¯ï¼ˆå¤§å°ã€ä¿®æ”¹æ—¶é—´ï¼‰

### 3. æ–‡ä»¶ç®¡ç†å™¨ï¼ˆFileManagerï¼‰

**åŠŸèƒ½**ï¼šç®¡ç†æœ¬åœ°æ–‡ä»¶å­˜å‚¨

```typescript
class FileManager {
  private imagesDir: string;

  // åˆå§‹åŒ–ç›®å½•
  async init(): Promise<void>;

  // ä¿å­˜å›¾ç‰‡
  async saveImage(base64Data: string, prefix: string): Promise<string>;

  // åˆ é™¤æ–‡ä»¶
  async deleteFile(filePath: string): Promise<boolean>;

  // ç”Ÿæˆæ–‡ä»¶å
  private generateFileName(prefix: string, ext: string): string;

  // è·å–å›¾ç‰‡ç›®å½•è·¯å¾„
  getImagesDirectory(): string;
}
```

**æ–‡ä»¶å‘½åè§„åˆ™**ï¼š

- æ ¼å¼ï¼š`{prefix}_{type}_{YYYYMMDD_HHmmss}.{ext}`
- ç¤ºä¾‹ï¼š`clipboard_image_20231012_143025.png`

### 4. æ•°æ®åº“ç®¡ç†å™¨ï¼ˆDatabaseManagerï¼‰

**åŠŸèƒ½**ï¼šç®¡ç†æ•°æ®åº“æ“ä½œ

```typescript
class DatabaseManager {
  private dbName: string = "clipboard_history";

  // ä¿å­˜è®°å½•
  async saveRecord(record: ClipboardRecord): Promise<DbResult>;

  // è·å–è®°å½•
  async getRecord(id: string): Promise<ClipboardRecord | null>;

  // æŸ¥è¯¢è®°å½•ï¼ˆæ”¯æŒåˆ†é¡µï¼‰
  async queryRecords(options: QueryOptions): Promise<ClipboardRecord[]>;

  // åˆ é™¤è®°å½•
  async deleteRecord(id: string): Promise<boolean>;

  // æœç´¢è®°å½•
  async searchRecords(keyword: string): Promise<ClipboardRecord[]>;

  // æŒ‰åˆ†ç±»æŸ¥è¯¢
  async getRecordsByCategory(category: string): Promise<ClipboardRecord[]>;
}
```

**æ•°æ®æ¨¡å‹**ï¼š

```typescript
interface ClipboardRecord {
  _id: string; // å”¯ä¸€æ ‡è¯†
  _rev?: string; // ç‰ˆæœ¬å·
  type: "text" | "image" | "file"; // ç±»å‹
  content: string; // å†…å®¹æˆ–æ–‡ä»¶è·¯å¾„
  preview: string; // é¢„è§ˆå†…å®¹ï¼ˆæ–‡æœ¬æ‘˜è¦æˆ–å›¾ç‰‡æè¿°ï¼‰
  thumbnail?: string; // ç¼©ç•¥å›¾è·¯å¾„ï¼ˆä»…å›¾ç‰‡ç±»å‹ï¼‰
  originalPath?: string; // åŸå§‹å›¾ç‰‡è·¯å¾„ï¼ˆç”¨äºå¤åˆ¶å®Œæ•´å›¾ç‰‡ï¼‰
  hash: string; // å†…å®¹ hash å€¼ï¼ˆç”¨äºå»é‡ï¼‰
  timestamp: number; // æ—¶é—´æˆ³
  category?: string; // åˆ†ç±»
  tags?: string[]; // æ ‡ç­¾
  metadata?: {
    // å…ƒæ•°æ®
    size?: number; // æ–‡ä»¶å¤§å°
    format?: string; // æ ¼å¼
    width?: number; // å›¾ç‰‡å®½åº¦
    height?: number; // å›¾ç‰‡é«˜åº¦
    [key: string]: any;
  };
}

interface QueryOptions {
  type?: "text" | "image" | "file"; // æŒ‰ç±»å‹ç­›é€‰
  category?: string; // æŒ‰åˆ†ç±»ç­›é€‰
  limit?: number; // é™åˆ¶æ•°é‡
  offset?: number; // åç§»é‡
  sortBy?: "timestamp" | "type"; // æ’åºå­—æ®µ
  order?: "asc" | "desc"; // æ’åºæ–¹å‘
}
```

---

## ğŸ¨ UI è®¾è®¡

### å¸ƒå±€ç»“æ„ï¼ˆå•åˆ—å¸ƒå±€ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å·¥å…·æ                                               â”‚
â”‚  [æœç´¢æ¡†] [å…¨éƒ¨â–¼] [æ–‡æœ¬] [å›¾ç‰‡] [æ–‡ä»¶] [è®¾ç½®]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åˆ—è¡¨åŒºåŸŸï¼ˆè™šæ‹Ÿæ»šåŠ¨ï¼‰                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ–¼ï¸ [ç¼©ç•¥å›¾]  è¿™æ˜¯ä¸€æ®µæ–‡æœ¬å†…å®¹...  [å¤åˆ¶] [åˆ ]â”‚    â”‚
â”‚  â”‚              2023-10-12 14:30:25              â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ ğŸ“„ è¿™æ˜¯å¦ä¸€æ®µå¾ˆé•¿çš„æ–‡æœ¬å†…å®¹ï¼Œå¯èƒ½éœ€è¦...      â”‚    â”‚
â”‚  â”‚              2023-10-12 14:25:10    [å¤åˆ¶] [åˆ ]â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ ğŸ–¼ï¸ [ç¼©ç•¥å›¾]  ç‚¹å‡»æŸ¥çœ‹å®Œæ•´å›¾ç‰‡    [å¤åˆ¶] [åˆ ] â”‚    â”‚
â”‚  â”‚              2023-10-12 14:20:05              â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ ...                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‚¹å‡»å›¾ç‰‡ç¼©ç•¥å›¾ â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [X å…³é—­]              å›¾ç‰‡é¢„è§ˆ                      â”‚
â”‚                                                      â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚              â”‚                     â”‚                 â”‚
â”‚              â”‚    å®Œæ•´å›¾ç‰‡æ˜¾ç¤º      â”‚                 â”‚
â”‚              â”‚                     â”‚                 â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                      â”‚
â”‚         [å¤åˆ¶å®Œæ•´å›¾ç‰‡] [ä¸‹è½½] [åˆ é™¤]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨å®ç°

**æ–¹æ¡ˆ**ï¼šè‡ªå®šä¹‰è™šæ‹Ÿæ»šåŠ¨

```typescript
class VirtualList {
  private container: HTMLElement;
  private items: ClipboardRecord[] = [];
  private visibleItems: ClipboardRecord[] = [];
  private itemHeight: number = 80; // æ¯é¡¹é«˜åº¦
  private visibleCount: number = 0; // å¯è§é¡¹æ•°é‡
  private startIndex: number = 0; // èµ·å§‹ç´¢å¼•
  private scrollTop: number = 0; // æ»šåŠ¨ä½ç½®

  // åˆå§‹åŒ–
  init(): void;

  // è®¾ç½®æ•°æ®
  setData(items: ClipboardRecord[]): void;

  // è®¡ç®—å¯è§èŒƒå›´
  private calculateVisibleRange(): void;

  // æ¸²æŸ“å¯è§é¡¹
  private renderVisibleItems(): void;

  // å¤„ç†æ»šåŠ¨äº‹ä»¶
  private handleScroll(): void;

  // æ›´æ–°å®¹å™¨é«˜åº¦
  private updateContainerHeight(): void;
}
```

**ä¼˜åŒ–ç­–ç•¥**ï¼š

- åªæ¸²æŸ“å¯è§åŒºåŸŸçš„é¡¹ï¼ˆçº¦ 20 é¡¹ï¼‰
- ä½¿ç”¨ `transform: translateY()` å®šä½
- é˜²æŠ–å¤„ç†æ»šåŠ¨äº‹ä»¶
- æ‡’åŠ è½½å›¾ç‰‡ç¼©ç•¥å›¾

### åˆ—è¡¨é¡¹ UI è®¾è®¡

**åˆ—è¡¨é¡¹å¸ƒå±€**ï¼ˆå•è¡Œï¼‰ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ç¼©ç•¥å›¾ 80x80]  å†…å®¹é¢„è§ˆï¼ˆæœ€å¤š 2 è¡Œï¼‰    [å¤åˆ¶] [åˆ ] â”‚
â”‚                 2023-10-12 14:30:25               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸åŒç±»å‹çš„å±•ç¤º**ï¼š

1. **æ–‡æœ¬ç±»å‹**ï¼š

   ```
   ğŸ“„ è¿™æ˜¯ä¸€æ®µæ–‡æœ¬å†…å®¹ï¼Œå¯èƒ½å¾ˆé•¿éœ€è¦æˆª...  [å¤åˆ¶] [åˆ ]
      2023-10-12 14:30:25
   ```

2. **å›¾ç‰‡ç±»å‹**ï¼š

   ```
   ğŸ–¼ï¸ [ç¼©ç•¥å›¾]  ç‚¹å‡»æŸ¥çœ‹å®Œæ•´å›¾ç‰‡  [å¤åˆ¶] [åˆ ]
              2023-10-12 14:25:10
   ```

3. **æ–‡ä»¶ç±»å‹**ï¼š
   ```
   ğŸ“ document.pdf (2.5 MB)  [å¤åˆ¶] [åˆ ]
      2023-10-12 14:20:05
   ```

**äº¤äº’è®¾è®¡**ï¼š

- **ç‚¹å‡»æ–‡æœ¬åŒºåŸŸ**ï¼šé€‰ä¸­è¯¥é¡¹
- **ç‚¹å‡»å›¾ç‰‡ç¼©ç•¥å›¾**ï¼šæ‰“å¼€é¢„è§ˆå¼¹çª—
- **ç‚¹å‡»å¤åˆ¶æŒ‰é’®**ï¼š
  - æ–‡æœ¬ï¼šå¤åˆ¶æ–‡æœ¬å†…å®¹
  - å›¾ç‰‡ï¼šå¤åˆ¶**å®Œæ•´åŸå›¾**åˆ°å‰ªè´´æ¿
  - æ–‡ä»¶ï¼šå¤åˆ¶æ–‡ä»¶è·¯å¾„
- **ç‚¹å‡»åˆ é™¤æŒ‰é’®**ï¼šåˆ é™¤è¯¥è®°å½•
- **æ‚¬åœæ•ˆæœ**ï¼šé«˜äº®æ˜¾ç¤º
- **é€‰ä¸­æ•ˆæœ**ï¼šèƒŒæ™¯è‰²å˜åŒ–

### å›¾ç‰‡é¢„è§ˆå¼¹çª—

**åŠŸèƒ½**ï¼šç‚¹å‡»åˆ—è¡¨ä¸­çš„ç¼©ç•¥å›¾ï¼Œå¼¹å‡ºæ¨¡æ€æ¡†æ˜¾ç¤ºå®Œæ•´å›¾ç‰‡

```typescript
class ImagePreviewModal {
  private modal: HTMLElement;
  private imageElement: HTMLImageElement;
  private currentRecord: ClipboardRecord | null = null;

  // æ˜¾ç¤ºé¢„è§ˆ
  show(record: ClipboardRecord): void;

  // éšè—é¢„è§ˆ
  hide(): void;

  // å¤åˆ¶å®Œæ•´å›¾ç‰‡
  async copyFullImage(): Promise<void>;

  // ä¸‹è½½å›¾ç‰‡
  async downloadImage(): Promise<void>;

  // åˆ é™¤è®°å½•
  async deleteRecord(): Promise<void>;
}
```

**å®ç°è¦ç‚¹**ï¼š

- æ¨¡æ€æ¡†èƒŒæ™¯åŠé€æ˜é®ç½©
- å›¾ç‰‡å±…ä¸­æ˜¾ç¤ºï¼Œæ”¯æŒç¼©æ”¾
- ESC é”®å…³é—­é¢„è§ˆ
- ç‚¹å‡»é®ç½©å±‚å…³é—­é¢„è§ˆ
- å¤åˆ¶æŒ‰é’®å¤åˆ¶**å®Œæ•´åŸå›¾**åˆ°å‰ªè´´æ¿

---

## ğŸ”„ æ•°æ®æµç¨‹

### 1. å»é‡æœºåˆ¶æµç¨‹

```
æ–°å†…å®¹å¤åˆ¶åˆ°å‰ªè´´æ¿
  â†“
è¯»å–å‰ªè´´æ¿å†…å®¹
  â†“
è®¡ç®—å†…å®¹ Hashï¼ˆMD5ï¼‰
  â†“
åœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢æ˜¯å¦å­˜åœ¨ç›¸åŒ Hash
  â†“
  â”œâ”€ å­˜åœ¨ â†’ è·³è¿‡ä¿å­˜ï¼ˆå»é‡ï¼‰
  â””â”€ ä¸å­˜åœ¨ â†’ ç»§ç»­ä¿å­˜æµç¨‹
```

**Hash è®¡ç®—ç­–ç•¥**ï¼š

- **æ–‡æœ¬**ï¼šå¯¹æ–‡æœ¬å†…å®¹è®¡ç®— MD5
- **å›¾ç‰‡**ï¼šå¯¹ base64 æ•°æ®è®¡ç®— MD5
- **æ–‡ä»¶**ï¼šå¯¹æ–‡ä»¶è·¯å¾„ + ä¿®æ”¹æ—¶é—´è®¡ç®— MD5

**å»é‡ä¼˜åŠ¿**ï¼š

- é¿å…å­˜å‚¨é‡å¤æ•°æ®
- èŠ‚çœç£ç›˜ç©ºé—´
- æé«˜æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½

### 2. å‰ªè´´æ¿å˜åŒ–æµç¨‹ï¼ˆå¸¦å»é‡ï¼‰

```
å‰ªè´´æ¿å˜åŒ–
  â†“
ClipboardWatcher æ£€æµ‹
  â†“
è®¡ç®—å†…å®¹ Hash
  â†“
æ•°æ®åº“æŸ¥è¯¢æ˜¯å¦é‡å¤
  â†“
  â”œâ”€ é‡å¤ â†’ è·³è¿‡ä¿å­˜
  â””â”€ ä¸é‡å¤ â†“
    é€‰æ‹©åˆé€‚çš„ Handler
    â†“
    Handler å¤„ç†æ•°æ®
      â”œâ”€ å›¾ç‰‡ï¼šä¿å­˜åŸå›¾ + ç”Ÿæˆç¼©ç•¥å›¾
      â””â”€ æ–‡æœ¬ï¼šä¿å­˜å†…å®¹
    â†“
    FileManager ä¿å­˜æ–‡ä»¶ï¼ˆå¦‚æœéœ€è¦ï¼‰
    â†“
    DatabaseManager ä¿å­˜è®°å½•ï¼ˆåŒ…å« hashï¼‰
    â†“
    é€šçŸ¥ UI æ›´æ–°
```

### 3. æ•°æ®æŸ¥è¯¢æµç¨‹

```
ç”¨æˆ·æœç´¢/ç­›é€‰
  â†“
DatabaseManager æŸ¥è¯¢
  â†“
è·å–è®°å½•åˆ—è¡¨ï¼ˆåŒ…å«ç¼©ç•¥å›¾è·¯å¾„ï¼‰
  â†“
VirtualList æ¸²æŸ“
  â†“
æ˜¾ç¤ºåœ¨ UIï¼ˆåˆ—è¡¨ä¸­æ˜¾ç¤ºç¼©ç•¥å›¾ï¼‰
```

### 4. å›¾ç‰‡é¢„è§ˆä¸å¤åˆ¶æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»ç¼©ç•¥å›¾
  â†“
æ˜¾ç¤ºé¢„è§ˆå¼¹çª—
  â†“
åŠ è½½å®Œæ•´åŸå›¾ï¼ˆä» originalPathï¼‰
  â†“
ç”¨æˆ·ç‚¹å‡»å¤åˆ¶æŒ‰é’®
  â†“
è¯»å–å®Œæ•´åŸå›¾æ•°æ®
  â†“
è°ƒç”¨ naimo.clipboard.writeImage()
  â†“
å¤åˆ¶å®Œæ•´å›¾ç‰‡åˆ°å‰ªè´´æ¿
```

**å…³é”®ç‚¹**ï¼š

- åˆ—è¡¨ä¸­æ˜¾ç¤ºç¼©ç•¥å›¾ï¼ˆ200x200ï¼‰èŠ‚çœå†…å­˜
- é¢„è§ˆå¼¹çª—åŠ è½½å®Œæ•´åŸå›¾
- å¤åˆ¶æ—¶ä½¿ç”¨å®Œæ•´åŸå›¾ï¼Œä¸æ˜¯ç¼©ç•¥å›¾

### 5. æ•°æ®åˆ é™¤æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»åˆ é™¤
  â†“
DatabaseManager åˆ é™¤è®°å½•
  â†“
FileManager åˆ é™¤æ–‡ä»¶
  â”œâ”€ åˆ é™¤åŸå›¾
  â””â”€ åˆ é™¤ç¼©ç•¥å›¾
  â†“
æ›´æ–° UI
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. ç›‘å¬ä¼˜åŒ–

- âœ… ä½¿ç”¨é˜²æŠ–é¿å…é¢‘ç¹æ£€æŸ¥
- âœ… å¯¹æ¯” hash å€¼é¿å…é‡å¤ä¿å­˜
- âœ… å¼‚æ­¥å¤„ç†ï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹

### 2. å­˜å‚¨ä¼˜åŒ–

- âœ… å›¾ç‰‡å‹ç¼©ï¼ˆç¼©ç•¥å›¾ï¼‰
- âœ… é™åˆ¶å­˜å‚¨æ€»é‡ï¼ˆå¦‚æœ€å¤š 1000 æ¡ï¼‰
- âœ… å®šæœŸæ¸…ç†è¿‡æœŸæ•°æ®

### 3. æ¸²æŸ“ä¼˜åŒ–

- âœ… è™šæ‹Ÿæ»šåŠ¨ï¼Œåªæ¸²æŸ“å¯è§é¡¹
- âœ… å›¾ç‰‡æ‡’åŠ è½½
- âœ… ä½¿ç”¨ CSS transform ç¡¬ä»¶åŠ é€Ÿ
- âœ… é˜²æŠ–å¤„ç†æœç´¢è¾“å…¥

---

## ğŸ® ç”¨æˆ·äº¤äº’

### å¿«æ·é”®

- `Ctrl/Cmd + F`ï¼šèšç„¦æœç´¢æ¡†
- `Ctrl/Cmd + C`ï¼šå¤åˆ¶é€‰ä¸­å†…å®¹
- `Delete`ï¼šåˆ é™¤é€‰ä¸­é¡¹
- `Escape`ï¼šå…³é—­é¢„è§ˆé¢æ¿

### å³é”®èœå•

- å¤åˆ¶å†…å®¹
- åˆ é™¤è®°å½•
- å¯¼å‡ºä¸ºæ–‡ä»¶
- æ·»åŠ æ ‡ç­¾
- è®¾ç½®åˆ†ç±»

---

## ğŸ›¡ï¸ å®‰å…¨ä¸éšç§

### æ•°æ®å®‰å…¨

- æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°
- ä¸ä¸Šä¼ åˆ°äº‘ç«¯
- æ”¯æŒåŠ å¯†å­˜å‚¨ï¼ˆå¯é€‰ï¼‰

### éšç§ä¿æŠ¤

- æ”¯æŒæ•æ„Ÿå†…å®¹è¿‡æ»¤
- æ”¯æŒé»‘åå•åº”ç”¨ï¼ˆä¸ç›‘å¬ç‰¹å®šåº”ç”¨ï¼‰
- æ”¯æŒæš‚åœç›‘å¬åŠŸèƒ½

---

## ğŸ§ª æµ‹è¯•æ–¹æ¡ˆ

### å•å…ƒæµ‹è¯•

- ClipboardWatcher ç›‘å¬é€»è¾‘
- Handler å¤„ç†é€»è¾‘
- FileManager æ–‡ä»¶æ“ä½œ
- DatabaseManager æ•°æ®åº“æ“ä½œ

### é›†æˆæµ‹è¯•

- å®Œæ•´çš„å‰ªè´´æ¿ä¿å­˜æµç¨‹
- æ•°æ®æŸ¥è¯¢å’Œç­›é€‰
- UI äº¤äº’å“åº”

### æ€§èƒ½æµ‹è¯•

- å¤§é‡æ•°æ®ä¸‹çš„æ¸²æŸ“æ€§èƒ½
- å†…å­˜å ç”¨
- æ–‡ä»¶å­˜å‚¨ç©ºé—´

---

## ğŸ“ API è®¾è®¡

### Preload APIï¼ˆå…¨éƒ¨å¼‚æ­¥ï¼‰

**é‡è¦**ï¼šæ‰€æœ‰ API éƒ½å¿…é¡»æ˜¯å¼‚æ­¥çš„ï¼Œè¿”å› Promise

```typescript
interface ClipboardHistoryAPI {
  // ==================== ç›‘å¬æ§åˆ¶ ====================

  // å¼€å§‹ç›‘å¬
  startMonitoring(): Promise<void>;

  // åœæ­¢ç›‘å¬
  stopMonitoring(): Promise<void>;

  // è·å–ç›‘å¬çŠ¶æ€
  isMonitoring(): Promise<boolean>;

  // ==================== æ•°æ®æŸ¥è¯¢ ====================

  // æŸ¥è¯¢è®°å½•ï¼ˆæ”¯æŒåˆ†é¡µã€ç­›é€‰ï¼‰
  queryRecords(options: QueryOptions): Promise<ClipboardRecord[]>;

  // æœç´¢è®°å½•
  searchRecords(keyword: string): Promise<ClipboardRecord[]>;

  // è·å–å•æ¡è®°å½•
  getRecord(id: string): Promise<ClipboardRecord | null>;

  // ==================== æ•°æ®æ“ä½œ ====================

  // åˆ é™¤è®°å½•ï¼ˆåŒæ—¶åˆ é™¤åŸå›¾å’Œç¼©ç•¥å›¾ï¼‰
  deleteRecord(id: string): Promise<boolean>;

  // æ¸…ç©ºæ‰€æœ‰è®°å½•
  clearAll(): Promise<boolean>;

  // ==================== å›¾ç‰‡æ“ä½œ ====================

  // è·å–å®Œæ•´åŸå›¾æ•°æ®ï¼ˆç”¨äºé¢„è§ˆå’Œå¤åˆ¶ï¼‰
  getFullImage(originalPath: string): Promise<string>;

  // å¤åˆ¶å®Œæ•´å›¾ç‰‡åˆ°å‰ªè´´æ¿
  copyFullImage(originalPath: string): Promise<boolean>;

  // ==================== æ•°æ®å¯¼å…¥å¯¼å‡º ====================

  // å¯¼å‡ºæ•°æ®
  exportData(): Promise<string>;

  // å¯¼å…¥æ•°æ®
  importData(data: string): Promise<boolean>;

  // ==================== å»é‡æ£€æŸ¥ ====================

  // æ£€æŸ¥å†…å®¹æ˜¯å¦é‡å¤
  checkDuplicate(hash: string): Promise<boolean>;
}
```

**å¼‚æ­¥è®¾è®¡åŸåˆ™**ï¼š

- æ‰€æœ‰æ–‡ä»¶ I/O æ“ä½œéƒ½æ˜¯å¼‚æ­¥çš„
- æ•°æ®åº“æ“ä½œéƒ½æ˜¯å¼‚æ­¥çš„
- UI å±‚é€šè¿‡ `await` è°ƒç”¨ï¼Œé¿å…é˜»å¡

---

## ğŸš€ å¼€å‘è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½ï¼ˆV1.0ï¼‰

**å¿…é¡»å®ç°**ï¼š

- âœ… **é…ç½®æ–‡ä»¶ç³»ç»Ÿ**ï¼ˆconfig.tsï¼‰
- âœ… å‰ªè´´æ¿ç›‘å¬ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ï¼‰
- âœ… **æ™ºèƒ½å»é‡æœºåˆ¶**ï¼ˆHash å¯¹æ¯”ï¼‰
- âœ… æ•°æ®å­˜å‚¨ï¼ˆæ•°æ®åº“ + æ–‡ä»¶ç³»ç»Ÿï¼‰
- âœ… **æ™ºèƒ½ç¼©ç•¥å›¾ç”Ÿæˆ**ï¼ˆæŒ‰å®½é«˜æ¯”ç¼©æ”¾ï¼Œå¯é…ç½®æœ€å¤§å®½åº¦ï¼‰
- âœ… **å•åˆ—å¸ƒå±€ UI**ï¼ˆç›´æ¥æ˜¾ç¤ºç¼©ç•¥å›¾ï¼‰
- âœ… è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨ï¼ˆé«˜æ€§èƒ½ï¼‰
- âœ… **å›¾ç‰‡é¢„è§ˆå¼¹çª—**ï¼ˆç‚¹å‡»ç¼©ç•¥å›¾ï¼‰
- âœ… **å¤åˆ¶å®Œæ•´åŸå›¾**ï¼ˆä¸æ˜¯ç¼©ç•¥å›¾ï¼‰
- âœ… æœç´¢åŠŸèƒ½
- âœ… åˆ†ç±»ç­›é€‰
- âœ… **å…¨éƒ¨å¼‚æ­¥ API**

### ç¬¬äºŒé˜¶æ®µï¼šé«˜çº§åŠŸèƒ½ï¼ˆV1.1ï¼‰

- â¬œ æ–‡ä»¶ç±»å‹æ”¯æŒ
- â¬œ æ ‡ç­¾ç³»ç»Ÿ
- â¬œ å¯¼å…¥å¯¼å‡º
- â¬œ æ•°æ®è‡ªåŠ¨æ¸…ç†ï¼ˆé™åˆ¶æœ€å¤§è®°å½•æ•°ï¼‰

### ç¬¬ä¸‰é˜¶æ®µï¼šæ‰©å±•åŠŸèƒ½ï¼ˆV1.2ï¼‰

- â¬œ å¿«æ·ç²˜è´´ï¼ˆå¿«æ·é”®å¿«é€Ÿé€‰æ‹©å†å²ï¼‰
- â¬œ æ™ºèƒ½åˆ†ç±»ï¼ˆAI è¯†åˆ«å†…å®¹ç±»å‹ï¼‰
- â¬œ äº‘åŒæ­¥ï¼ˆå¯é€‰ï¼‰
- â¬œ åŠ å¯†å­˜å‚¨

---

## ğŸ” å…³é”®æŠ€æœ¯ç‚¹

### 1. å‰ªè´´æ¿ç›‘å¬å®ç°

**é—®é¢˜**ï¼šElectron æ²¡æœ‰åŸç”Ÿçš„å‰ªè´´æ¿å˜åŒ–ç›‘å¬ API

**è§£å†³æ–¹æ¡ˆ**ï¼š

- ä½¿ç”¨å®šæ—¶å™¨è½®è¯¢ï¼ˆ`setInterval`ï¼‰
- å¯¹æ¯”å‰ªè´´æ¿å†…å®¹çš„ hash å€¼
- ä¼˜åŒ–è½®è¯¢é—´éš”ï¼ˆ500msï¼‰

```typescript
private async checkClipboard(): Promise<void> {
  try {
    // æ£€æŸ¥æ–‡æœ¬
    if (await naimo.clipboard.hasText()) {
      const text = await naimo.clipboard.readText();
      if (text !== this.lastText) {
        this.lastText = text;
        await this.handleTextChange(text);
      }
    }

    // æ£€æŸ¥å›¾ç‰‡
    if (await naimo.clipboard.hasImage()) {
      const image = await naimo.clipboard.readImage();
      if (image !== this.lastImage) {
        this.lastImage = image;
        await this.handleImageChange(image);
      }
    }
  } catch (error) {
    console.error('æ£€æŸ¥å‰ªè´´æ¿å¤±è´¥:', error);
  }
}
```

### 2. å›¾ç‰‡ä¿å­˜ä¸ç¼©ç•¥å›¾ç”Ÿæˆ

**é—®é¢˜**ï¼šå¤§å›¾ç‰‡å ç”¨ç©ºé—´å¤§ï¼Œåˆ—è¡¨å±•ç¤ºå¡é¡¿

**è§£å†³æ–¹æ¡ˆ**ï¼š

- ä¿å­˜åŸå›¾åˆ°æ–‡ä»¶ç³»ç»Ÿ
- **æŒ‰åŸå§‹å®½é«˜æ¯”ç”Ÿæˆç¼©ç•¥å›¾**ç”¨äºåˆ—è¡¨å±•ç¤º
- ç¼©ç•¥å›¾æœ€å¤§å®½åº¦å¯é…ç½®ï¼ˆé»˜è®¤ 200pxï¼‰
- æ•°æ®åº“å­˜å‚¨åŸå›¾è·¯å¾„ + ç¼©ç•¥å›¾è·¯å¾„
- å¤åˆ¶æ—¶ä½¿ç”¨åŸå›¾ï¼Œåˆ—è¡¨æ˜¾ç¤ºç¼©ç•¥å›¾

```typescript
import { ClipboardConfig } from './config';

async saveImageWithThumbnail(
  base64Data: string,
  prefix: string
): Promise<{
  originalPath: string;
  thumbnailPath: string;
  hash: string;
  metadata: {
    width: number;
    height: number;
    thumbnailWidth: number;
    thumbnailHeight: number;
  };
}> {
  // ç”Ÿæˆæ–‡ä»¶å
  const timestamp = this.generateTimestamp();
  const originalName = `${prefix}_image_${timestamp}.png`;
  const thumbnailName = `${prefix}_thumb_${timestamp}.png`;

  const originalPath = path.join(this.imagesDir, originalName);
  const thumbnailPath = path.join(this.imagesDir, thumbnailName);

  // è§£æ base64
  const base64Image = base64Data.replace(/^data:image\/\w+;base64,/, '');
  const buffer = Buffer.from(base64Image, 'base64');

  // è®¡ç®— hashï¼ˆç”¨äºå»é‡ï¼‰
  const hash = crypto.createHash('md5').update(buffer).digest('hex');

  // ä¿å­˜åŸå›¾
  await fs.promises.writeFile(originalPath, buffer);

  // è·å–åŸå§‹å›¾ç‰‡å°ºå¯¸
  const { createCanvas, loadImage } = require('canvas');
  const image = await loadImage(buffer);
  const originalWidth = image.width;
  const originalHeight = image.height;

  // ç”Ÿæˆå¹¶ä¿å­˜ç¼©ç•¥å›¾ï¼ˆæŒ‰å®½é«˜æ¯”ç¼©æ”¾ï¼‰
  const { thumbnail, thumbnailWidth, thumbnailHeight } =
    await this.generateThumbnail(buffer);
  await fs.promises.writeFile(thumbnailPath, thumbnail);

  return {
    originalPath,
    thumbnailPath,
    hash,
    metadata: {
      width: originalWidth,
      height: originalHeight,
      thumbnailWidth,
      thumbnailHeight,
    },
  };
}

/**
 * ç”Ÿæˆç¼©ç•¥å›¾ï¼ˆæ ¹æ®åŸå§‹å®½é«˜æ¯”ç¼©æ”¾ï¼‰
 *
 * ç¼©æ”¾è§„åˆ™ï¼š
 * 1. å¦‚æœåŸå›¾å®½åº¦ <= maxWidthï¼Œä¸ç¼©æ”¾
 * 2. å¦‚æœåŸå›¾å®½åº¦ > maxWidthï¼ŒæŒ‰æ¯”ä¾‹ç¼©æ”¾åˆ° maxWidth
 * 3. å§‹ç»ˆä¿æŒåŸå§‹å®½é«˜æ¯”ï¼Œä¸ä¼šå˜å½¢
 *
 * ç¤ºä¾‹ï¼š
 * - 1920x1080 â†’ 200x112 (å®½é«˜æ¯” 16:9)
 * - 800x600 â†’ 200x150 (å®½é«˜æ¯” 4:3)
 * - 100x100 â†’ 100x100 (ä¸ç¼©æ”¾)
 */
private async generateThumbnail(
  imageBuffer: Buffer
): Promise<{
  thumbnail: Buffer;
  thumbnailWidth: number;
  thumbnailHeight: number;
}> {
  const { createCanvas, loadImage } = require('canvas');

  // åŠ è½½åŸå§‹å›¾ç‰‡
  const image = await loadImage(imageBuffer);
  const originalWidth = image.width;
  const originalHeight = image.height;

  // ä»é…ç½®è·å–æœ€å¤§å®½åº¦
  const maxWidth = ClipboardConfig.thumbnailMaxWidth;
  const maxHeight = ClipboardConfig.thumbnailMaxHeight;

  // è®¡ç®—ç¼©ç•¥å›¾å°ºå¯¸ï¼ˆä¿æŒå®½é«˜æ¯”ï¼‰
  let thumbnailWidth = originalWidth;
  let thumbnailHeight = originalHeight;

  if (ClipboardConfig.thumbnailKeepAspectRatio) {
    // æŒ‰å®½é«˜æ¯”ç¼©æ”¾
    if (originalWidth > maxWidth || originalHeight > maxHeight) {
      // è®¡ç®—å®½åº¦å’Œé«˜åº¦çš„ç¼©æ”¾æ¯”ä¾‹
      const widthScale = maxWidth / originalWidth;
      const heightScale = maxHeight / originalHeight;

      // é€‰æ‹©è¾ƒå°çš„ç¼©æ”¾æ¯”ä¾‹ï¼Œç¡®ä¿ä¸è¶…å‡ºæœ€å¤§å°ºå¯¸
      const scale = Math.min(widthScale, heightScale);

      thumbnailWidth = Math.round(originalWidth * scale);
      thumbnailHeight = Math.round(originalHeight * scale);
    }
  } else {
    // å¼ºåˆ¶ç¼©æ”¾åˆ°æŒ‡å®šå°ºå¯¸ï¼ˆå¯èƒ½å˜å½¢ï¼‰
    thumbnailWidth = Math.min(originalWidth, maxWidth);
    thumbnailHeight = Math.min(originalHeight, maxHeight);
  }

  // åˆ›å»ºç”»å¸ƒ
  const canvas = createCanvas(thumbnailWidth, thumbnailHeight);
  const ctx = canvas.getContext('2d');

  // ç»˜åˆ¶ç¼©ç•¥å›¾
  ctx.drawImage(image, 0, 0, thumbnailWidth, thumbnailHeight);

  // è½¬æ¢ä¸º Buffer
  const format = ClipboardConfig.thumbnailFormat;
  const quality = ClipboardConfig.thumbnailQuality;

  let thumbnail: Buffer;
  if (format === 'jpg' || format === 'jpeg') {
    thumbnail = canvas.toBuffer('image/jpeg', { quality });
  } else if (format === 'webp') {
    thumbnail = canvas.toBuffer('image/webp', { quality });
  } else {
    thumbnail = canvas.toBuffer('image/png');
  }

  return { thumbnail, thumbnailWidth, thumbnailHeight };
}
```

**ç¼©æ”¾ç®—æ³•è¯¦è§£**ï¼š

```typescript
// ç¤ºä¾‹ 1: æ¨ªå‘å›¾ç‰‡
// åŸå§‹å°ºå¯¸: 1920x1080, maxWidth: 200, maxHeight: 200
// widthScale = 200/1920 = 0.104
// heightScale = 200/1080 = 0.185
// é€‰æ‹©è¾ƒå°çš„: scale = 0.104
// ç»“æœ: 200x112 âœ… (ä¿æŒ 16:9 å®½é«˜æ¯”)

// ç¤ºä¾‹ 2: çºµå‘å›¾ç‰‡
// åŸå§‹å°ºå¯¸: 1080x1920, maxWidth: 200, maxHeight: 200
// widthScale = 200/1080 = 0.185
// heightScale = 200/1920 = 0.104
// é€‰æ‹©è¾ƒå°çš„: scale = 0.104
// ç»“æœ: 112x200 âœ… (ä¿æŒ 9:16 å®½é«˜æ¯”)

// ç¤ºä¾‹ 3: å°å›¾ç‰‡
// åŸå§‹å°ºå¯¸: 100x100, maxWidth: 200, maxHeight: 200
// ä¸éœ€è¦ç¼©æ”¾
// ç»“æœ: 100x100 âœ… (ä¿æŒåŸå°ºå¯¸)
```

**é…ç½®ç¤ºä¾‹**ï¼š

```typescript
// ä¿®æ”¹ç¼©ç•¥å›¾æœ€å¤§å®½åº¦
ClipboardConfig.thumbnailMaxWidth = 300; // æ”¹ä¸º 300px

// ä¿®æ”¹ç¼©ç•¥å›¾æ ¼å¼ä¸º JPGï¼ˆæ›´å°çš„æ–‡ä»¶ï¼‰
ClipboardConfig.thumbnailFormat = "jpg";
ClipboardConfig.thumbnailQuality = 0.85;

// ç¦ç”¨å®½é«˜æ¯”ä¿æŒï¼ˆå¼ºåˆ¶ç¼©æ”¾ï¼Œå¯èƒ½å˜å½¢ï¼‰
ClipboardConfig.thumbnailKeepAspectRatio = false;
```

**ä¼˜åŒ–æ•ˆæœ**ï¼š

- âœ… åˆ—è¡¨åªåŠ è½½å°ç¼©ç•¥å›¾ï¼Œå†…å­˜å ç”¨ä½
- âœ… æ»šåŠ¨æµç•…ï¼Œæ— å¡é¡¿
- âœ… é¢„è§ˆå’Œå¤åˆ¶ä½¿ç”¨å®Œæ•´åŸå›¾ï¼Œè´¨é‡ä¸æŸå¤±
- âœ… Hash å»é‡é¿å…é‡å¤å­˜å‚¨
- âœ… æŒ‰å®½é«˜æ¯”ç¼©æ”¾ï¼Œå›¾ç‰‡ä¸å˜å½¢
- âœ… å¯é…ç½®ç¼©ç•¥å›¾å°ºå¯¸ï¼Œçµæ´»é€‚åº”ä¸åŒéœ€æ±‚

### 3. è™šæ‹Ÿæ»šåŠ¨å®ç°

**é—®é¢˜**ï¼šå¤§é‡æ•°æ®æ¸²æŸ“å¡é¡¿

**è§£å†³æ–¹æ¡ˆ**ï¼š

- è®¡ç®—å¯è§åŒºåŸŸçš„èµ·å§‹å’Œç»“æŸç´¢å¼•
- åªæ¸²æŸ“å¯è§èŒƒå›´å†…çš„é¡¹
- ä½¿ç”¨ `transform` å®šä½é¡¹

```typescript
private calculateVisibleRange(): void {
  this.startIndex = Math.floor(this.scrollTop / this.itemHeight);
  const endIndex = this.startIndex + this.visibleCount;
  this.visibleItems = this.items.slice(this.startIndex, endIndex + 5); // +5 ç¼“å†²
}

private renderVisibleItems(): void {
  const fragment = document.createDocumentFragment();

  this.visibleItems.forEach((item, index) => {
    const actualIndex = this.startIndex + index;
    const element = this.createItemElement(item);
    element.style.transform = `translateY(${actualIndex * this.itemHeight}px)`;
    fragment.appendChild(element);
  });

  this.container.innerHTML = '';
  this.container.appendChild(fragment);
}
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. é”™è¯¯å¤„ç†

- æ‰€æœ‰å¼‚æ­¥æ“ä½œä½¿ç”¨ try-catch
- è®°å½•é”™è¯¯æ—¥å¿—
- å‘ç”¨æˆ·æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯æç¤º

### 2. æ€§èƒ½ç›‘æ§

- è®°å½•å…³é”®æ“ä½œçš„è€—æ—¶
- ç›‘æ§å†…å­˜ä½¿ç”¨
- å®šæœŸæ¸…ç†ä¸´æ—¶æ•°æ®

### 3. ç”¨æˆ·ä½“éªŒ

- æ˜¾ç¤ºåŠ è½½çŠ¶æ€
- æä¾›æ“ä½œåé¦ˆ
- æ”¯æŒæ’¤é”€æ“ä½œ

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [Naimo Tools æ’ä»¶å¼€å‘æ–‡æ¡£](../README.md)
- [Electron å‰ªè´´æ¿ API](https://www.electronjs.org/docs/api/clipboard)
- [è™šæ‹Ÿæ»šåŠ¨åŸç†](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)
- [LevelDB æ•°æ®åº“](https://github.com/Level/level)

---

## ğŸ“ æ€»ç»“

è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„å‰ªè´´æ¿å†å²ç®¡ç†æ’ä»¶ï¼Œæ ¸å¿ƒæŠ€æœ¯ç‚¹åŒ…æ‹¬ï¼š

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§

1. **é…ç½®æ–‡ä»¶ç³»ç»Ÿ**ï¼šé›†ä¸­ç®¡ç†æ‰€æœ‰é…ç½®é¡¹ï¼Œçµæ´»å¯å®šåˆ¶
2. **æ™ºèƒ½å»é‡**ï¼šHash å¯¹æ¯”é¿å…é‡å¤å­˜å‚¨
3. **æ™ºèƒ½ç¼©ç•¥å›¾**ï¼šæŒ‰åŸå§‹å®½é«˜æ¯”ç¼©æ”¾ï¼Œä¸å˜å½¢ï¼Œå¯é…ç½®
4. **è™šæ‹Ÿæ»šåŠ¨**ï¼šé«˜æ€§èƒ½åˆ—è¡¨æ¸²æŸ“ï¼ˆæ”¯æŒ 10000+ æ¡ï¼‰
5. **å•åˆ—å¸ƒå±€**ï¼šç›´æ¥å±•ç¤ºå†…å®¹å’Œç¼©ç•¥å›¾ï¼Œç®€æ´æ˜äº†
6. **å›¾ç‰‡é¢„è§ˆ**ï¼šå¼¹çª—æŸ¥çœ‹å®Œæ•´å›¾ç‰‡ï¼Œæ”¯æŒç¼©æ”¾
7. **å®Œæ•´å¤åˆ¶**ï¼šå¤åˆ¶åŸå›¾è€Œéç¼©ç•¥å›¾ï¼Œè´¨é‡æ— æŸ
8. **å…¨å¼‚æ­¥ API**ï¼šæ‰€æœ‰æ“ä½œå¼‚æ­¥ï¼Œä¸é˜»å¡ UI
9. **å¯æ‰©å±•æ¶æ„**ï¼šå¤„ç†å™¨æ¨¡å¼æ”¯æŒè‡ªå®šä¹‰æ‰©å±•

### ğŸ’¡ å…³é”®æ”¹è¿›ç‚¹

| æ”¹è¿›ç‚¹         | è¯´æ˜                         | ä¼˜åŠ¿                     |
| -------------- | ---------------------------- | ------------------------ |
| **é…ç½®ç³»ç»Ÿ**   | ç»Ÿä¸€é…ç½®æ–‡ä»¶ config.ts       | æ˜“äºå®šåˆ¶ï¼Œç»´æŠ¤æ–¹ä¾¿       |
| **å»é‡æœºåˆ¶**   | MD5 Hash å¯¹æ¯”                | èŠ‚çœ 30-50% å­˜å‚¨ç©ºé—´     |
| **æ™ºèƒ½ç¼©ç•¥å›¾** | æŒ‰å®½é«˜æ¯”ç¼©æ”¾ï¼Œå¯é…ç½®æœ€å¤§å®½åº¦ | ä¸å˜å½¢ï¼Œå†…å­˜å ç”¨é™ä½ 80% |
| **å•åˆ—å¸ƒå±€**   | ç»Ÿä¸€åˆ—è¡¨å±•ç¤º                 | UI æ›´ç®€æ´ï¼Œæ“ä½œæ›´ç›´æ¥    |
| **åŸå›¾å¤åˆ¶**   | ä¿ç•™å®Œæ•´è´¨é‡                 | æ— æŸå¤åˆ¶ï¼Œä¸“ä¸šä½“éªŒ       |
| **å¼‚æ­¥ API**   | å…¨éƒ¨ Promise                 | å“åº”æ›´å¿«ï¼Œä½“éªŒæ›´æµç•…     |
| **çµæ´»é…ç½®**   | æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹           | é€‚åº”ä¸åŒä½¿ç”¨åœºæ™¯         |

### ğŸš€ æ€§èƒ½æŒ‡æ ‡

- **ç›‘å¬å»¶è¿Ÿ**ï¼š< 500msï¼ˆå¯é…ç½®ï¼‰
- **å»é‡æ£€æŸ¥**ï¼š< 10ms
- **ç¼©ç•¥å›¾ç”Ÿæˆ**ï¼š< 100ms
- **åˆ—è¡¨æ¸²æŸ“**ï¼š60 FPSï¼ˆ10000+ æ¡è®°å½•ï¼‰
- **å†…å­˜å ç”¨**ï¼š< 200MBï¼ˆ1000 æ¡è®°å½•ï¼‰
- **ç¼©ç•¥å›¾å¤§å°**ï¼šæ¯”åŸå›¾å° 70-90%

### ğŸ¯ å¼€å‘é‡ç‚¹

1. **é…ç½®ç®¡ç†**ï¼šä½¿ç”¨ config.ts ç»Ÿä¸€ç®¡ç†é…ç½®ï¼Œé¿å…ç¡¬ç¼–ç 
2. **é”™è¯¯å¤„ç†**ï¼šæ‰€æœ‰å¼‚æ­¥æ“ä½œä½¿ç”¨ try-catch
3. **æ€§èƒ½ä¼˜åŒ–**ï¼šè™šæ‹Ÿæ»šåŠ¨ + æ‡’åŠ è½½ + æ™ºèƒ½ç¼©ç•¥å›¾
4. **ç”¨æˆ·ä½“éªŒ**ï¼šåŠ è½½çŠ¶æ€ + æ“ä½œåé¦ˆ + å¿«æ·é”®
5. **æ•°æ®å®‰å…¨**ï¼šæœ¬åœ°å­˜å‚¨ + å¯é€‰åŠ å¯† + å®šæœŸæ¸…ç†
6. **çµæ´»å®šåˆ¶**ï¼šé€šè¿‡é…ç½®æ–‡ä»¶é€‚åº”ä¸åŒéœ€æ±‚

### ğŸ“Œ ç¼©ç•¥å›¾ç”Ÿæˆäº®ç‚¹

```typescript
// æ™ºèƒ½ç¼©æ”¾ç®—æ³•
// 1. ä¿æŒåŸå§‹å®½é«˜æ¯”
// 2. ä¸è¶…è¿‡æœ€å¤§å®½åº¦/é«˜åº¦
// 3. å°å›¾ä¸æ”¾å¤§

// ç¤ºä¾‹æ•ˆæœï¼š
1920x1080 â†’ 200x112  // 16:9 å®½å±
1080x1920 â†’ 112x200  // 9:16 ç«–å±
800x600   â†’ 200x150  // 4:3 ä¼ ç»Ÿ
100x100   â†’ 100x100  // å°å›¾ä¿æŒåŸå°ºå¯¸

// å¯é…ç½®ï¼š
thumbnailMaxWidth: 200      // è°ƒæ•´æœ€å¤§å®½åº¦
thumbnailKeepAspectRatio: true  // ä¿æŒæ¯”ä¾‹
thumbnailFormat: 'png'      // å›¾ç‰‡æ ¼å¼
thumbnailQuality: 0.8       // è´¨é‡ï¼ˆJPG/WebPï¼‰
```

å¼€å‘æ—¶éœ€è¦æ³¨æ„æ€§èƒ½ä¼˜åŒ–ã€é”™è¯¯å¤„ç†å’Œç”¨æˆ·ä½“éªŒï¼Œç¡®ä¿æ’ä»¶åœ¨å¤§é‡æ•°æ®ä¸‹ä¾ç„¶æµç•…è¿è¡Œã€‚é…ç½®æ–‡ä»¶ä½¿æ’ä»¶æ›´åŠ çµæ´»ï¼Œå¯ä»¥æ ¹æ®ä¸åŒåœºæ™¯è¿›è¡Œå®šåˆ¶ã€‚
